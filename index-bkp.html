<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>QuietTimer — 무소음 스톱워치 & 카운트다운</title>
  <meta name="description" content="도서관·스터디룸에서도 쓸 수 있는 무소음 스톱워치/카운트다운. 기록은 로컬에만 저장됩니다." />
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icon-192.png" sizes="192x192">
  <link rel="icon" href="/icon-512.png" sizes="512x512">
  <link rel="canonical" href="https://ranghaesa.github.io/">

  <!-- AdSense: client ID만 넣고, 슬롯은 아래 <ins>에서 교체 -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3600890134957135"
    crossorigin="anonymous"></script>

  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#0b0c10;color:#eee;line-height:1.6}
    header,main,footer{max-width:900px;margin:0 auto;padding:16px}
    nav a{margin-right:14px;text-decoration:none;color:#9ad}
    h1,h2{margin:16px 0 8px}
    .card{background:#121317;border:1px solid #222;border-radius:12px;padding:16px;margin:12px 0}
    .grid{display:grid;gap:12px}
    .grid-2{grid-template-columns:1fr; }
    @media(min-width:820px){ .grid-2{grid-template-columns:1fr 1fr} }
    .btn{border:1px solid #333;background:#1a1b20;color:#fff;padding:8px 12px;border-radius:8px;cursor:pointer}
    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .muted{color:#9aa}
    ins.adsbygoogle{display:block;min-height:90px}
    table{width:100%;border-collapse:collapse}
    th,td{border-top:1px solid #222;padding:8px;text-align:left}
    small{color:#9aa}
  </style>
</head>
<body>
<header class="row" style="justify-content:space-between;align-items:center">
  <div class="row">
    <strong>QuietTimer</strong>
    <nav>
      <a href="/">홈</a>
      <a href="/about.html">소개</a>
      <a href="/guide.html">사용법</a>
      <a href="/faq.html">FAQ</a>
      <a href="/privacy.html">개인정보</a>
      <a href="/terms.html">약관</a>
      <a href="/contact.html">문의</a>
    </nav>
  </div>
</header>

<main>
  <section class="card">
    <h1>무소음 타이머</h1>
    <p class="muted">소리 없이 작업 시간을 측정하는 스톱워치 & 카운트다운</p>

    <div class="grid grid-2">
      <div class="card">
        <h2>스톱워치</h2>
        <div id="stopwatch" style="font-size:2rem">00:00:00.00</div>
        <input id="task" placeholder="작업 이름" aria-label="작업 이름" />
        <div class="row">
          <button class="btn" id="sw-start">시작</button>
          <button class="btn" id="sw-pause">일시정지</button>
          <button class="btn" id="sw-lap">랩</button>
          <button class="btn" id="sw-reset">초기화</button>
          <button class="btn" id="sw-export">CSV 내보내기</button>
        </div>
        <table id="laps"><thead><tr><th>시간</th><th>랩</th><th>작업 시각</th></tr></thead><tbody></tbody></table>
      </div>

      <div class="card">
        <h2>카운트다운</h2>
        <div style="font-size:2rem" id="countdown">25:00.00</div>
        <div class="row">
          <label>분 <input id="cd-min" type="number" value="25" min="0" style="width:80px"></label>
          <label>초 <input id="cd-sec" type="number" value="0"  min="0" max="59" style="width:80px"></label>
          <label><input id="vibrate" type="checkbox"> 진동</label>
          <label><input id="notify"  type="checkbox"> 데스크톱 알림</label>
        </div>
        <div class="row">
          <button class="btn" id="cd-start">시작</button>
          <button class="btn" id="cd-pause">일시정지</button>
          <button class="btn" id="cd-reset">초기화</button>
        </div>
        <p class="muted">종료 시 화면만으로 알려줍니다(무음). 진동/알림은 선택.</p>
      </div>
    </div>
  </section>

  <!-- 콘텐츠와 콘텐츠 사이에 ‘1개’만: 과도 노출 방지 -->
  <section class="card">
    <h2>스폰서</h2>
    <ins class="adsbygoogle"
         data-ad-client="ca-pub-3600890134957135"
         data-ad-slot="DATA-AD-SLOT-HERE"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
    <small class="muted">광고는 서비스 유지에 도움이 됩니다.</small>
  </section>

  <section class="card" id="about">
    <h2>QuietTimer 소개</h2>
    <p>QuietTimer는 무소음 환경에서 집중할 수 있도록 설계된 무료 온라인 타이머입니다. 브라우저만 있으면 어디서든 사용할 수 있으며, 회원가입이나 설치가 필요 없습니다.</p>
    <p>모든 기록은 <strong>브라우저 로컬 저장소(LocalStorage)</strong>에만 저장되며 서버로 전송되지 않습니다.</p>
  </section>

  <section class="card" id="guide">
    <h2>사용법</h2>
    <ol>
      <li>스톱워치로 공부/업무 시간을 기록합니다.</li>
      <li>카운트다운으로 목표 시간을 설정하고 집중합니다.</li>
      <li>랩 기능으로 세부 구간을 관리합니다.</li>
      <li>기록은 필요 시 CSV로 내보낼 수 있습니다.</li>
    </ol>
  </section>

  <section class="card" id="faq">
    <h2>자주 묻는 질문</h2>
    <h3>기록이 서버로 전송되나요?</h3>
    <p>아니요. 모든 데이터는 내 장치의 로컬 저장소에만 보관됩니다.</p>
    <h3>모바일에서도 사용 가능한가요?</h3>
    <p>네. 최신 모바일 브라우저에서 동일하게 동작합니다.</p>
  </section>
</main>

<footer class="row" style="justify-content:space-between">
  <small>© <span id="year"></span> QuietTimer</small>
  <small><a href="/privacy.html">개인정보처리방침</a> · <a href="/terms.html">이용약관</a> · <a href="/contact.html">문의</a></small>
</footer>

<script>
  // 간단한 타이머 로직 (로컬 저장·CSV 내보내기 포함)
  const sw = {start:0, elapsed:0, timer:null};
  const $ = s=>document.querySelector(s);
  const $$ = s=>document.querySelectorAll(s);
  const fmt = ms => {
    const h=Math.floor(ms/3600000), m=Math.floor(ms%3600000/60000),
          s=Math.floor(ms%60000/1000), cs=Math.floor(ms%1000/10);
    return [h,m,s].map(v=>String(v).padStart(2,'0')).join(':')+'.'+String(cs).padStart(2,'0');
  };
  function renderLaps(){
    const tbody = $('#laps tbody'); tbody.innerHTML='';
    (JSON.parse(localStorage.getItem('laps')||'[]')).forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${r.t}</td><td>${r.lap}</td><td>${new Date(r.at).toLocaleString()}</td>`;
      tbody.appendChild(tr);
    });
  }
  function pushLap(t){
    const laps=JSON.parse(localStorage.getItem('laps')||'[]');
    laps.push({t, lap:laps.length+1, at:Date.now()});
    localStorage.setItem('laps', JSON.stringify(laps)); renderLaps();
  }
  $('#sw-start').onclick=()=>{
    if(sw.timer) return;
    sw.start = Date.now()-sw.elapsed;
    sw.timer = setInterval(()=>{ sw.elapsed=Date.now()-sw.start; $('#stopwatch').textContent=fmt(sw.elapsed); }, 10);
  };
  $('#sw-pause').onclick=()=>{ clearInterval(sw.timer); sw.timer=null; };
  $('#sw-reset').onclick=()=>{ sw.elapsed=0; $('#stopwatch').textContent=fmt(0); localStorage.removeItem('laps'); renderLaps(); };
  $('#sw-lap').onclick=()=> pushLap($('#stopwatch').textContent);
  $('#sw-export').onclick=()=>{
    const rows = [['시간','랩','작업 시각']].concat((JSON.parse(localStorage.getItem('laps')||'[]')).map(r=>[r.t,r.lap,new Date(r.at).toLocaleString()]));
    const csv = rows.map(r=>r.join(',')).join('\n');
    const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'}); const url=URL.createObjectURL(blob);
    const a=document.createElement('a'); a.href=url; a.download='quiettimer-laps.csv'; a.click(); URL.revokeObjectURL(url);
  };

  // 카운트다운
  let cdTimer=null, cdRemain=25*60*1000;
  function renderCD(){ const m=Math.floor(cdRemain/60000), s=Math.floor(cdRemain%60000/1000); $('#countdown').textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.00`; }
  $('#cd-start').onclick=()=>{
    const m=+$('#cd-min').value||0, s=+$('#cd-sec').value||0; cdRemain=(m*60+s)*1000; renderCD();
    if(Notification && $('#notify').checked && Notification.permission!=='granted'){ Notification.requestPermission(); }
    clearInterval(cdTimer);
    cdTimer=setInterval(()=>{
      cdRemain-=100; if(cdRemain<=0){ clearInterval(cdTimer); cdTimer=null; cdRemain=0; renderCD();
        if($('#vibrate').checked && navigator.vibrate) navigator.vibrate([80,40,80]);
        if($('#notify').checked && Notification && Notification.permission==='granted'){ new Notification('QuietTimer', { body:'카운트다운 종료', silent:true }); }
        document.body.style.outline='3px solid #61dafb';
        setTimeout(()=>document.body.style.outline='none', 2500);
      } else renderCD();
    },100);
  };
  $('#cd-pause').onclick=()=>{ clearInterval(cdTimer); cdTimer=null; };
  $('#cd-reset').onclick=()=>{ clearInterval(cdTimer); cdTimer=null; cdRemain=(+$('#cd-min').value*60 + +$('#cd-sec').value)*1000; renderCD(); };

  // PWA
  if('serviceWorker' in navigator){ navigator.serviceWorker.register('/sw.js'); }
  document.getElementById('year').textContent = new Date().getFullYear();
  renderLaps(); renderCD();
</script>
</body>
</html>
